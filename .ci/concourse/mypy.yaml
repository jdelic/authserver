platform: linux

image_resource:
    type: docker-image
    source:
        repository: debian
        tag: 'stretch-slim'

inputs:
    - name: authserver

run:
    path: /bin/bash
    args:
        - -c
        - |
            apt-get -q update &&
            apt-get -q -y upgrade &&
            apt-get --no-install-recommends -q -y -o DPkg::Options::=--force-confold \
                -o DPkg::Options::=--force-confdef install \
                python3.5 python3-pip python-setuptools &&
            pip3 install mypy-lang typing &&
            MYPYPATH=authserver mypy -s --disallow-untyped-calls --disallow-untyped-defs authserver
